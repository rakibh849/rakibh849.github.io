<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>UID TopUp - Email ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶≤‡¶ó‡¶á‡¶®/‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121212;
      color: #eee;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }

    .container {
      background: #1e1e1e;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.7);
      max-width: 400px;
      width: 100%;
    }

    h2 {
      text-align: center;
      color: #f50057;
      margin-bottom: 24px;
      font-weight: 700;
    }

    input[type="email"],
    input[type="password"],
    select {
      width: 100%;
      background: transparent;
      border: none;
      border-bottom: 2px solid #555;
      padding: 10px 5px;
      margin-bottom: 30px;
      font-size: 16px;
      color: #eee;
      outline: none;
      transition: border-color 0.3s;
    }

    input[type="email"]:focus,
    input[type="password"]:focus,
    select:focus {
      border-bottom-color: #f50057;
    }

    ::placeholder {
      color: #bbb;
    }

    button {
      width: 100%;
      padding: 12px;
      font-size: 18px;
      font-weight: 600;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: #f50057;
      color: white;
      transition: background 0.3s;
    }
    button:hover {
      background: #c40048;
    }
    button.logout {
      background: #ff1744;
      margin-top: 10px;
    }
    button.logout:hover {
      background: #d50036;
    }

    .toggle-link {
      display: block;
      text-align: center;
      margin: 20px 0;
      color: #f50057;
      cursor: pointer;
      text-decoration: underline;
      font-weight: 600;
      user-select: none;
    }

    .error {
      color: #ff5252;
      font-size: 14px;
      margin-bottom: 15px;
      text-align: center;
    }

    .order {
      background: #2c2c2c;
      padding: 12px 15px;
      border-left: 4px solid #f50057;
      margin-bottom: 15px;
      border-radius: 6px;
      font-size: 15px;
      line-height: 1.4;
      word-break: break-word;
    }
  </style>
</head>
<body>

<div class="container" id="signupSection">
  <h2>‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</h2>
  <div id="signupError" class="error"></div>
  <input type="email" id="signupEmail" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
  <input type="password" id="signupPassword" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
  <button onclick="signup()">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  <span class="toggle-link" onclick="showLogin()">‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</span>
</div>

<div class="container" id="loginSection">
  <h2>‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
  <div id="loginError" class="error"></div>
  <input type="email" id="loginEmail" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤" />
  <input type="password" id="loginPassword" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°" />
  <button onclick="login()">‡¶≤‡¶ó‡¶á‡¶®</button>
  <span class="toggle-link" onclick="showSignup()">‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞? ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</span>
</div>

<div class="container" id="appSection">
  <h2>üíé UID TopUp ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
  <input type="text" id="uid" placeholder="UID ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
  <input type="text" id="txn" placeholder="Transaction ID (Txn ID) ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
  <select id="diamond">
    <option value="">‡¶°‡¶æ‡¶Ø‡¶º‡¶Æ‡¶®‡ßç‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</option>
    <option value="50" data-price="45">50 Diamond ‚Äì ‡ß≥45</option>
    <option value="115" data-price="85">115 Diamond ‚Äì ‡ß≥85</option>
    <option value="240" data-price="130">240 Diamond ‚Äì ‡ß≥130</option>
    <option value="355" data-price="180">355 Diamond ‚Äì ‡ß≥180</option>
  </select>
  <button onclick="placeOrder()">‚úÖ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  <button class="logout" onclick="logout()">üö™ ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>

  <h3>üìÉ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
  <div id="orderList"></div>
</div>

<script>
  const BOT_TOKEN = "7975966275:AAGr5XpeBkZAX63OBREGZ6LpkHERMm3ee7g";
  const CHAT_ID = "7356214087";

  function showSignup() {
    clearErrors();
    document.getElementById("signupSection").style.display = "block";
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("appSection").style.display = "none";
  }
  function showLogin() {
    clearErrors();
    document.getElementById("signupSection").style.display = "none";
    document.getElementById("loginSection").style.display = "block";
    document.getElementById("appSection").style.display = "none";
  }
  function showApp() {
    clearErrors();
    document.getElementById("signupSection").style.display = "none";
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("appSection").style.display = "block";
    renderOrders();
  }
  function clearErrors() {
    document.getElementById("signupError").textContent = "";
    document.getElementById("loginError").textContent = "";
  }

  function signup() {
    clearErrors();
    const email = document.getElementById("signupEmail").value.trim().toLowerCase();
    const password = document.getElementById("signupPassword").value.trim();

    if (!email || !password) {
      document.getElementById("signupError").textContent = "‡¶∏‡¶¨ ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
      return;
    }

    // ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶∏‡¶ø‡¶Æ‡ßç‡¶™‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶®
    if (!validateEmail(email)) {
      document.getElementById("signupError").textContent = "‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§";
      return;
    }

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    if (users[email]) {
      document.getElementById("signupError").textContent = "‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶Ü‡¶õ‡ßá‡•§";
      return;
    }

    users[email] = password;
    localStorage.setItem("users", JSON.stringify(users));
    alert("‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶è‡¶ñ‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
    showLogin();
  }

  function login() {
    clearErrors();
    const email = document.getElementById("loginEmail").value.trim().toLowerCase();
    const password = document.getElementById("loginPassword").value.trim();

    if (!email || !password) {
      document.getElementById("loginError").textContent = "‡¶∏‡¶¨ ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
      return;
    }

    if (!validateEmail(email)) {
      document.getElementById("loginError").textContent = "‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§";
      return;
    }

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    if (!users[email] || users[email] !== password) {
      document.getElementById("loginError").textContent = "‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡•§";
      return;
    }

    localStorage.setItem("loggedInUser", email);
    showApp();
  }

  function logout() {
    localStorage.removeItem("loggedInUser");
    location.reload();
  }

  function placeOrder() {
    const uid = document.getElementById("uid").value.trim();
    const txn = document.getElementById("txn").value.trim();
    const diamondSelect = document.getElementById("diamond");
    const diamond = diamondSelect.value;
    const price = diamondSelect.options[diamondSelect.selectedIndex].dataset.price;

    if (!uid || !diamond || !txn) {
      alert("‡¶∏‡¶¨ ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!");
      return;
    }

    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    const currentUser = localStorage.getItem("loggedInUser");

    const newOrder = {
      uid,
      diamond,
      total: price,
      status: "Pending",
      user: currentUser,
      time: new Date().toLocaleString(),
      txn
    };

    orders.push(newOrder);
    localStorage.setItem("orders", JSON.stringify(orders));
    renderOrders();

    const message = 
      `‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞:\n` +
      `User Email: ${currentUser}\n` +
      `UID: ${uid}\n` +
      `Txn ID: ${txn}\n` +
      `Diamond: ${diamond}\n` +
      `Total: ‡ß≥${price}\n` +
      `Order Time: ${newOrder.time}`;

    const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`;

    fetch(url)
      .then(res => {
        if(res.ok){
          alert("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç Telegram ‡¶è ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
          document.getElementById("uid").value = "";
          document.getElementById("txn").value = "";
          diamondSelect.selectedIndex = 0;
        } else {
          alert("Telegram ‡¶è ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§");
        }
      })
      .catch(() => alert("‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶¨‡¶æ Telegram API ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§"));
  }

  function renderOrders() {
    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    const currentUser = localStorage.getItem("loggedInUser");
    const list = document.getElementById("orderList");
    list.innerHTML = "";

    const userOrders = orders.filter(o => o.user === currentUser);
    if(userOrders.length === 0){
      list.innerHTML = "<p>‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§</p>";
      return;
    }

    userOrders.forEach(o => {
      list.innerHTML += `
        <div class="order">
          <strong>UID:</strong> ${o.uid}<br />
          <strong>Txn ID:</strong> ${o.txn}<br />
          <strong>Diamond:</strong> ${o.diamond}<br />
          <strong>Total:</strong> ‡ß≥${o.total}<br />
          <strong>Status:</strong> <em>${o.status}</em><br />
          <small>Order Time: ${o.time}</small>
        </div>
      `;
    });
  }

  function validateEmail(email) {
    // ‡¶∏‡¶ø‡¶Æ‡ßç‡¶™‡¶≤ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® Regex
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
  }

  window.onload = function() {
    if(localStorage.getItem("loggedInUser")){
      showApp();
    } else {
      showSignup();
    }
  }
</script>

</body>
</html>
