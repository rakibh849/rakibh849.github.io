<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>SignUp/Login/Logout + UID TopUp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: sans-serif; background: #f0f0f0; padding: 20px; }
    .container { max-width: 480px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { text-align: center; color: #e91e63; }
    input, select, button {
      width: 100%; padding: 10px; margin-bottom: 12px;
      font-size: 16px; border: 1px solid #ccc; border-radius: 5px;
    }
    button { background: #28a745; color: white; border: none; cursor: pointer; }
    button.logout { background: #dc3545; }
    .order { background: #f9f9f9; padding: 10px; margin-bottom: 10px; border-left: 4px solid #e91e63; }
    .toggle-link {
      color: #e91e63; cursor: pointer; text-align: center; display: block; margin-top: -8px; margin-bottom: 20px; text-decoration: underline;
    }
    .error { color: red; font-size: 14px; margin-bottom: 10px; }
    #signupSection, #loginSection, #appSection { display: none; }
  </style>
</head>
<body>

<div class="container" id="signupSection">
  <h2>‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</h2>
  <div id="signupError" class="error"></div>
  <input type="text" id="signupUsername" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
  <input type="password" id="signupPassword" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
  <button onclick="signup()">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  <span class="toggle-link" onclick="showLogin()">‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</span>
</div>

<div class="container" id="loginSection">
  <h2>‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
  <div id="loginError" class="error"></div>
  <input type="text" id="loginUsername" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ" />
  <input type="password" id="loginPassword" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°" />
  <button onclick="login()">‡¶≤‡¶ó‡¶á‡¶®</button>
  <span class="toggle-link" onclick="showSignup()">‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞? ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</span>
</div>

<div class="container" id="appSection">
  <h2>üíé UID TopUp Order</h2>
  <input type="text" id="uid" placeholder="UID ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
  <select id="diamond">
    <option value="">‡¶°‡¶æ‡¶Ø‡¶º‡¶Æ‡¶®‡ßç‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</option>
    <option value="50" data-price="45">50 Diamond ‚Äì ‡ß≥45</option>
    <option value="115" data-price="85">115 Diamond ‚Äì ‡ß≥85</option>
    <option value="240" data-price="130">240 Diamond ‚Äì ‡ß≥130</option>
    <option value="355" data-price="180">355 Diamond ‚Äì ‡ß≥180</option>
  </select>
  <button onclick="placeOrder()">‚úÖ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  <button class="logout" onclick="logout()">üö™ ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>

  <h3>üìÉ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
  <div id="orderList"></div>
</div>

<script>
  // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶ï‡ßã‡¶® ‡¶∏‡ßá‡¶ï‡¶∂‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßã ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç
  function showSignup() {
    clearErrors();
    document.getElementById("signupSection").style.display = "block";
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("appSection").style.display = "none";
  }
  function showLogin() {
    clearErrors();
    document.getElementById("signupSection").style.display = "none";
    document.getElementById("loginSection").style.display = "block";
    document.getElementById("appSection").style.display = "none";
  }
  function showApp() {
    clearErrors();
    document.getElementById("signupSection").style.display = "none";
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("appSection").style.display = "block";
    renderOrders();
  }
  function clearErrors() {
    document.getElementById("signupError").textContent = "";
    document.getElementById("loginError").textContent = "";
  }

  // Sign Up
  function signup() {
    clearErrors();
    const username = document.getElementById("signupUsername").value.trim();
    const password = document.getElementById("signupPassword").value.trim();

    if (!username || !password) {
      document.getElementById("signupError").textContent = "‡¶∏‡¶¨ ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
      return;
    }

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    if (users[username]) {
      document.getElementById("signupError").textContent = "‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§";
      return;
    }

    users[username] = password;
    localStorage.setItem("users", JSON.stringify(users));
    alert("‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶è‡¶ñ‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
    showLogin();
  }

  // Login
  function login() {
    clearErrors();
    const username = document.getElementById("loginUsername").value.trim();
    const password = document.getElementById("loginPassword").value.trim();

    if (!username || !password) {
      document.getElementById("loginError").textContent = "‡¶∏‡¶¨ ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
      return;
    }

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    if (!users[username] || users[username] !== password) {
      document.getElementById("loginError").textContent = "‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡•§";
      return;
    }

    localStorage.setItem("loggedInUser", username);
    showApp();
  }

  // Logout
  function logout() {
    localStorage.removeItem("loggedInUser");
    location.reload();
  }

  // Place Order
  function placeOrder() {
    const uid = document.getElementById("uid").value.trim();
    const diamondSelect = document.getElementById("diamond");
    const diamond = diamondSelect.value;
    const price = diamondSelect.options[diamondSelect.selectedIndex].dataset.price;

    if (!uid || !diamond) {
      alert("UID ‡¶ì ‡¶°‡¶æ‡¶Ø‡¶º‡¶Æ‡¶®‡ßç‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!");
      return;
    }

    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    orders.push({
      uid,
      diamond,
      total: price,
      status: "Pending",
      user: localStorage.getItem("loggedInUser"),
      time: new Date().toLocaleString()
    });
    localStorage.setItem("orders", JSON.stringify(orders));

    alert("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
    document.getElementById("uid").value = "";
    diamondSelect.selectedIndex = 0;
    renderOrders();
  }

  // Render Orders (Logged in user only)
  function renderOrders() {
    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    const currentUser = localStorage.getItem("loggedInUser");
    const list = document.getElementById("orderList");
    list.innerHTML = "";

    const userOrders = orders.filter(o => o.user === currentUser);
    if (userOrders.length === 0) {
      list.innerHTML = "<p>‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§</p>";
      return;
    }

    userOrders.forEach(o => {
      list.innerHTML += `
        <div class="order">
          <strong>UID:</strong> ${o.uid}<br />
          <strong>Diamond:</strong> ${o.diamond}<br />
          <strong>Total:</strong> ‡ß≥${o.total}<br />
          <strong>Status:</strong> <em>${o.status}</em><br />
          <small>Ordered on: ${o.time}</small>
        </div>
      `;
    });
  }

  // On page load check logged in
  window.onload = function() {
    if (localStorage.getItem("loggedInUser")) {
      showApp();
    } else {
      showSignup();
    }
  }
</script>

</body>
</html>
