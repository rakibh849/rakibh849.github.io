<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>UID TopUp with Signup/Login & Telegram Notify</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: sans-serif; background: #f0f0f0; padding: 20px; }
    .container { max-width: 480px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { text-align: center; color: #e91e63; }
    input, select, button {
      width: 100%; padding: 10px; margin-bottom: 12px;
      font-size: 16px; border: 1px solid #ccc; border-radius: 5px;
    }
    button { background: #28a745; color: white; border: none; cursor: pointer; }
    button.logout { background: #dc3545; }
    .order { background: #f9f9f9; padding: 10px; margin-bottom: 10px; border-left: 4px solid #e91e63; }
    .toggle-link {
      color: #e91e63; cursor: pointer; text-align: center; display: block; margin-top: -8px; margin-bottom: 20px; text-decoration: underline;
    }
    .error { color: red; font-size: 14px; margin-bottom: 10px; }
    #signupSection, #loginSection, #appSection { display: none; }
  </style>
</head>
<body>

<div class="container" id="signupSection">
  <h2>ржирждрзБржи ржЗржЙржЬрж╛рж░ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи</h2>
  <div id="signupError" class="error"></div>
  <input type="text" id="signupUsername" placeholder="ржЗржЙржЬрж╛рж░ржирзЗржо рж▓рж┐ржЦрзБржи" />
  <input type="password" id="signupPassword" placeholder="ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж▓рж┐ржЦрзБржи" />
  <button onclick="signup()">рж╕рж╛ржЗржи ржЖржк ржХрж░рзБржи</button>
  <span class="toggle-link" onclick="showLogin()">ржЖржЧрзЗ ржерзЗржХрзЗ ржПржХрж╛ржЙржирзНржЯ ржЖржЫрзЗ? рж▓ржЧржЗржи ржХрж░рзБржи</span>
</div>

<div class="container" id="loginSection">
  <h2>рж▓ржЧржЗржи ржХрж░рзБржи</h2>
  <div id="loginError" class="error"></div>
  <input type="text" id="loginUsername" placeholder="ржЗржЙржЬрж╛рж░ржирзЗржо" />
  <input type="password" id="loginPassword" placeholder="ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб" />
  <button onclick="login()">рж▓ржЧржЗржи</button>
  <span class="toggle-link" onclick="showSignup()">ржирждрзБржи ржЗржЙржЬрж╛рж░? рж╕рж╛ржЗржи ржЖржк ржХрж░рзБржи</span>
</div>

<div class="container" id="appSection">
  <h2>ЁЯТО UID TopUp ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржи</h2>
  <input type="text" id="uid" placeholder="UID рж▓рж┐ржЦрзБржи" />
  <input type="text" id="txn" placeholder="Transaction ID (Txn ID) рж▓рж┐ржЦрзБржи" />
  <select id="diamond">
    <option value="">ржбрж╛ржпрж╝ржоржирзНржб рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи</option>
    <option value="50" data-price="45">50 Diamond тАУ рз│45</option>
    <option value="115" data-price="85">115 Diamond тАУ рз│85</option>
    <option value="240" data-price="130">240 Diamond тАУ рз│130</option>
    <option value="355" data-price="180">355 Diamond тАУ рз│180</option>
  </select>
  <button onclick="placeOrder()">тЬЕ ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржи</button>
  <button class="logout" onclick="logout()">ЁЯЪк рж▓ржЧржЖржЙржЯ</button>

  <h3>ЁЯУГ ржЖржкржирж╛рж░ ржЕрж░рзНржбрж╛рж░ рждрж╛рж▓рж┐ржХрж╛</h3>
  <div id="orderList"></div>
</div>

<script>
  // ржЖржкржирж╛рж░ Bot Token ржПржмржВ Chat ID (ржПржЦрж╛ржирзЗ ржмрж╕рж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ)
  const BOT_TOKEN = "7975966275:AAGr5XpeBkZAX63OBREGZ6LpkHERMm3ee7g";
  const CHAT_ID = "7356214087";

  // Show/hide sections
  function showSignup() {
    clearErrors();
    document.getElementById("signupSection").style.display = "block";
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("appSection").style.display = "none";
  }
  function showLogin() {
    clearErrors();
    document.getElementById("signupSection").style.display = "none";
    document.getElementById("loginSection").style.display = "block";
    document.getElementById("appSection").style.display = "none";
  }
  function showApp() {
    clearErrors();
    document.getElementById("signupSection").style.display = "none";
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("appSection").style.display = "block";
    renderOrders();
  }
  function clearErrors() {
    document.getElementById("signupError").textContent = "";
    document.getElementById("loginError").textContent = "";
  }

  // Signup
  function signup() {
    clearErrors();
    const username = document.getElementById("signupUsername").value.trim();
    const password = document.getElementById("signupPassword").value.trim();

    if (!username || !password) {
      document.getElementById("signupError").textContent = "рж╕ржм ржШрж░ ржкрзВрж░ржг ржХрж░рзБржиред";
      return;
    }

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    if (users[username]) {
      document.getElementById("signupError").textContent = "ржЗржЙржЬрж╛рж░ржирзЗржо ржЗрждрж┐ржоржзрзНржпрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржЪрзНржЫрзЗред";
      return;
    }

    users[username] = password;
    localStorage.setItem("users", JSON.stringify(users));
    alert("рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи рж╕ржорзНржкржирзНржи! ржПржЦржи рж▓ржЧржЗржи ржХрж░рзБржиред");
    showLogin();
  }

  // Login
  function login() {
    clearErrors();
    const username = document.getElementById("loginUsername").value.trim();
    const password = document.getElementById("loginPassword").value.trim();

    if (!username || !password) {
      document.getElementById("loginError").textContent = "рж╕ржм ржШрж░ ржкрзВрж░ржг ржХрж░рзБржиред";
      return;
    }

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    if (!users[username] || users[username] !== password) {
      document.getElementById("loginError").textContent = "ржЗржЙржЬрж╛рж░ржирзЗржо ржмрж╛ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржнрзБрж▓ред";
      return;
    }

    localStorage.setItem("loggedInUser", username);
    showApp();
  }

  // Logout
  function logout() {
    localStorage.removeItem("loggedInUser");
    location.reload();
  }

  // Place Order and send Telegram message
  function placeOrder() {
    const uid = document.getElementById("uid").value.trim();
    const txn = document.getElementById("txn").value.trim();
    const diamondSelect = document.getElementById("diamond");
    const diamond = diamondSelect.value;
    const price = diamondSelect.options[diamondSelect.selectedIndex].dataset.price;

    if (!uid || !diamond || !txn) {
      alert("рж╕ржм ржШрж░ ржкрзВрж░ржг ржХрж░рзБржи!");
      return;
    }

    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    const currentUser = localStorage.getItem("loggedInUser");

    const newOrder = {
      uid,
      diamond,
      total: price,
      status: "Pending",
      user: currentUser,
      time: new Date().toLocaleString(),
      txn
    };

    orders.push(newOrder);
    localStorage.setItem("orders", JSON.stringify(orders));
    renderOrders();

    // Send message to Telegram
    const message = 
      `ржирждрзБржи ржЕрж░рзНржбрж╛рж░:\n` +
      `User: ${currentUser}\n` +
      `UID: ${uid}\n` +
      `Txn ID: ${txn}\n` +
      `Diamond: ${diamond}\n` +
      `Total: рз│${price}\n` +
      `Order Time: ${newOrder.time}`;

    const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`;

    fetch(url)
      .then(res => {
        if(res.ok){
          alert("ржЕрж░рзНржбрж╛рж░ рж╕ржлрж▓ржнрж╛ржмрзЗ ржЬржорж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржмржВ Telegram ржП ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ!");
          document.getElementById("uid").value = "";
          document.getElementById("txn").value = "";
          diamondSelect.selectedIndex = 0;
        } else {
          alert("Telegram ржП ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред");
        }
      })
      .catch(() => alert("ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржорж╕рзНржпрж╛ ржмрж╛ Telegram API рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред"));
  }

  // Render orders for logged in user
  function renderOrders() {
    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    const currentUser = localStorage.getItem("loggedInUser");
    const list = document.getElementById("orderList");
    list.innerHTML = "";

    const userOrders = orders.filter(o => o.user === currentUser);
    if(userOrders.length === 0){
      list.innerHTML = "<p>ржХрзЛржирзЛ ржЕрж░рзНржбрж╛рж░ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐ред</p>";
      return;
    }

    userOrders.forEach(o => {
      list.innerHTML += `
        <div class="order">
          <strong>UID:</strong> ${o.uid}<br />
          <strong>Txn ID:</strong> ${o.txn}<br />
          <strong>Diamond:</strong> ${o.diamond}<br />
          <strong>Total:</strong> рз│${o.total}<br />
          <strong>Status:</strong> <em>${o.status}</em><br />
          <small>Order Time: ${o.time}</small>
        </div>
      `;
    });
  }

  // On page load check login status
  window.onload = function() {
    if(localStorage.getItem("loggedInUser")){
      showApp();
    } else {
      showSignup();
    }
  }
</script>

</body>
</html>
